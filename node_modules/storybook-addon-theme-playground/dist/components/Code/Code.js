import React, { useState, useEffect } from 'react';
import StyledCode from './Code.style';
var Code = function (_a) {
    var value = _a.value;
    var _b = useState(false), copied = _b[0], setCopied = _b[1];
    var copyToClipboard = function () {
        var element = document.createElement('textarea');
        element.value = JSON.stringify(value, null, 2);
        element.setAttribute('readonly', '');
        element.style.position = 'absolute';
        element.style.left = '-9999px';
        document.body.appendChild(element);
        element.select();
        document.execCommand('copy');
        document.body.removeChild(element);
        setCopied(true);
    };
    useEffect(function () {
        var timeout = setTimeout(function () {
            setCopied(false);
        }, 1500);
        return function () {
            clearTimeout(timeout);
        };
    }, [copied]);
    return (React.createElement(StyledCode, null,
        React.createElement("div", { className: "code__wrapper" },
            React.createElement("code", null,
                React.createElement("pre", null, JSON.stringify(value, null, 2))),
            React.createElement("button", { type: "button", onClick: copyToClipboard, disabled: copied }, copied ? 'Copied' : 'Copy'))));
};
export default Code;
